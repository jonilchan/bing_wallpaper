# Bing Wallpaper Rust

ä¸€ä¸ªè½»é‡çš„ä¸‰ç«¯é€šç”¨è‡ªåŠ¨æ¢å£çº¸å·¥å…·ã€‚æ¯å¤©è‡ªåŠ¨ä»å¿…åº” (Bing) è·å–æœ€æ–°çš„ 4K/UHD å£çº¸ï¼Œè‡ªåŠ¨ä¿å­˜å¹¶è®¾ç½®ä¸ºå½“å‰ç³»ç»Ÿæ¡Œé¢ã€‚

## âœ¨ ç‰¹æ€§

- **é«˜æ¸…ç”»è´¨**ï¼šå¼ºåˆ¶è·å– 4K/UHD åˆ†è¾¨ç‡å›¾ç‰‡ã€‚
- **é˜²æ­¢ç¼“å­˜**ï¼šåŸºäºæ—¥æœŸå‘½åæ–‡ä»¶ï¼Œå½»åº•è§£å†³æ“ä½œç³»ç»Ÿå› è·¯å¾„ä¸å˜è€Œä¸åˆ·æ–°å£çº¸çš„é—®é¢˜ã€‚
- **è‡ªåŠ¨æ¸…ç†**ï¼šè‡ªåŠ¨ç»´æŠ¤ä¿å­˜ç›®å½•ï¼Œé»˜è®¤ä»…ä¿ç•™æœ€è¿‘ 7 å¤©çš„å›¾ç‰‡ï¼ŒèŠ‚çœç©ºé—´ã€‚
- **è½»é‡é«˜æ•ˆ**ï¼šä½¿ç”¨ Rust ç¼–å†™ï¼Œç¼–è¯‘åä½“ç§¯å°ï¼ˆç»è¿‡ `strip` å¤„ç†ï¼‰ï¼Œèµ„æºå ç”¨æä½ã€‚
- **ä¸‰ç«¯æ”¯æŒ**ï¼šå®Œç¾é€‚é… macOS, Windows, Linuxã€‚

## ğŸš€ ç¼–è¯‘ä¸å®‰è£…

### 1. ä¼˜åŒ–é…ç½® (Cargo.toml)
ä¸ºäº†è·å¾—æœ€å°çš„ä½“ç§¯å¹¶é¿å…å¯¹ç³»ç»Ÿ OpenSSL çš„ä¾èµ–ï¼Œå»ºè®®åœ¨ `Cargo.toml` ä¸­ä½¿ç”¨ä»¥ä¸‹é…ç½®ï¼š

```toml
[dependencies]
# ä½¿ç”¨ rustls-tls æé«˜å¯ç§»æ¤æ€§
reqwest = { version = "0.11", default-features = false, features = ["json", "rustls-tls"] }
tokio = { version = "1", features = ["full"] }
serde = { version = "1.0", features = ["derive"] }
anyhow = "1.0"
dirs = "5.0"
wallpaper = "1.10"
chrono = "0.4"

[profile.release]
strip = true      # è‡ªåŠ¨å‰¥ç¦»ç¬¦å·è¡¨ï¼Œå¤§å¹…å‡å°ä½“ç§¯
lto = true        # é“¾æ¥æ—¶ä¼˜åŒ–
opt-level = "z"   # ä¼˜åŒ–ç›®æ ‡ä¸ºæœ€å°å°ºå¯¸
```

### 2. æ„å»º
```bash
cargo build --release
```
ç¼–è¯‘äº§ç‰©ä½äº `target/release/bing_wallpaper`ã€‚

---

## ğŸ“… å®šæ—¶ä»»åŠ¡è®¾ç½® (é‡ç‚¹)

ä¸ºäº†å®ç°å£çº¸æ¯æ—¥è‡ªåŠ¨æ›´æ–°ï¼Œå»ºè®®æ ¹æ®æ“ä½œç³»ç»Ÿé…ç½®å®šæ—¶ä»»åŠ¡ï¼š

### ğŸªŸ Windows (ä½¿ç”¨ä»»åŠ¡è®¡åˆ’ç¨‹åº)
1. æœç´¢å¹¶æ‰“å¼€â€œä»»åŠ¡è®¡åˆ’ç¨‹åºâ€ã€‚
2. åˆ›å»ºåŸºæœ¬ä»»åŠ¡ï¼Œè®¾ç½®è§¦å‘å™¨ä¸ºâ€œæ¯å¤©â€ã€‚
3. æ“ä½œé€‰æ‹©â€œå¯åŠ¨ç¨‹åºâ€ï¼Œæµè§ˆå¹¶é€‰æ‹©ç¼–è¯‘å¥½çš„ `bing_wallpaper.exe`ã€‚
4. åœ¨â€œæ¡ä»¶â€é€‰é¡¹å¡ä¸­ï¼Œå‹¾é€‰â€œåªæœ‰åœ¨ç½‘ç»œè¿æ¥å¯ç”¨æ—¶æ‰å¯åŠ¨â€ã€‚

### ğŸ§ Linux & ğŸ macOS
å¯ä»¥ä½¿ç”¨ `cron` æˆ– `systemd timer`ã€‚
```bash
# ç¼–è¾‘ crontab
crontab -e
# æ·»åŠ ä¸€è¡Œ (æ¯å¤©ä¸Šåˆ 9 ç‚¹è¿è¡Œ)
0 9 * * * /path/to/bing_wallpaper
```

---

## âš ï¸ å¸¸è§é—®é¢˜æ’æŸ¥ (macOS)

### 1. "æ— æ³•æ‰“å¼€ï¼Œå› ä¸ºæ— æ³•éªŒè¯å¼€å‘è€…"
å¦‚æœä½ å°†ç¼–è¯‘å¥½çš„ç¨‹åºå‘ç»™åˆ«äººï¼Œå¯¹æ–¹ä¼šç”±äº macOS Gatekeeper é™åˆ¶æ— æ³•è¿è¡Œã€‚
- **è§£å†³æ–¹æ³•**ï¼šå³é”®ç‚¹å‡»ç¨‹åº -> é€‰æ‹©â€œæ‰“å¼€â€ï¼›æˆ–è€…åœ¨ç»ˆç«¯è¿è¡Œï¼š
  ```bash
  xattr -d com.apple.quarantine ./bing_wallpaper
  ```

### 2. "osascript exited with status code 1"
è¿™é€šå¸¸å‘ç”Ÿåœ¨ `cron` ç¯å¢ƒä¸­ã€‚
- **åŸå› **ï¼š`cron` ç¼ºå°‘ä¿®æ”¹ç³»ç»Ÿè®¾ç½®çš„ TCC æƒé™ã€‚
- **è§£å†³æ–¹æ³•**ï¼šè¯·ä½¿ç”¨ä¸Šè¿°çš„ `Launchd (.plist)` æ–¹å¼éƒ¨ç½²ã€‚

### 3. å£çº¸æ²¡æœ‰å³æ—¶åˆ·æ–°
- **åŸå› **ï¼šæ“ä½œç³»ç»Ÿç¼“å­˜äº†æ—§å£çº¸è·¯å¾„ã€‚
- **è§£å†³**ï¼šæœ¬ç¨‹åºå·²é€šè¿‡â€œæ¯æ—¥æ—¥æœŸé‡å‘½åâ€ç­–ç•¥è§£å†³æ­¤é—®é¢˜ã€‚

## ğŸ“‚ æ–‡ä»¶å­˜å‚¨è·¯å¾„
- **macOS**: `~/Pictures/BingWallpapers/`
- **Windows**: `C:\Users\ç”¨æˆ·å\Pictures\BingWallpapers\`
- **Linux**: `~/Pictures/BingWallpapers/` (è§† XDG é…ç½®è€Œå®š)

---

## ğŸ“œ è®¸å¯è¯
MIT License